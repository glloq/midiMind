<!-- ============================================================================
Fichier: frontend/index.html
Version: v3.8.0 - INTERFACE REFACTORIS√âE COH√âRENTE
Date: 2025-10-29
============================================================================ 
NOUVELLES FONCTIONNALIT√âS v3.8.0:
‚úÖ Menu principal simplifi√© avec logo et barre de lecture
‚úÖ Coccinelle debug en haut √† droite
‚úÖ Navigation: Home + Fichiers + Instruments + Keyboard + Syst√®me
‚úÖ Page Home: s√©lection + visualizer + barre instruments + mute global
‚úÖ Page Fichiers: liste + √©dition + routes + playlists
‚úÖ Page Instruments: connexion + param√®tres d√©lais
‚úÖ Interface coh√©rente et minimaliste
============================================================================ -->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIDI Mind - Syst√®me d'Orchestration MIDI v3.1</title>
    
    <!-- ========================================================================
         STYLES CSS
         ======================================================================== -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/pages.css">
    <link rel="stylesheet" href="styles/home.css">
    <link rel="stylesheet" href="styles/instruments.css">
    <link rel="stylesheet" href="styles/keyboard.css">
    <link rel="stylesheet" href="styles/midi.css">
    <link rel="stylesheet" href="styles/editor.css">
    <link rel="stylesheet" href="styles/routing.css">
    <link rel="stylesheet" href="styles/visualizer.css">
    <link rel="stylesheet" href="styles/themes.css">
</head>
<body>
    <!-- ========================================================================
         MAIN APP CONTAINER
         ======================================================================== -->
    <div id="app" style="display: none;">
        
        <!-- ========================================================================
             HEADER - Menu principal avec logo et contr√¥les
             ======================================================================== -->
        <header class="app-header">
            <div class="header-content">
                <!-- Logo -->
                <div class="header-logo">
                    <div class="logo-icon">üéπ</div>
                    <div class="logo-text">
                        <span class="logo-title">MIDI Mind</span>
                        <span class="logo-version">v3.1</span>
                    </div>
                </div>
                
                <!-- Barre de lecture globale -->
                <div class="global-playback-bar">
                    <div class="playback-info">
                        <span class="current-file-name" id="globalFileName">Aucun fichier</span>
                        <span class="current-time" id="globalTime">00:00</span>
                        <span class="separator">/</span>
                        <span class="total-time" id="globalDuration">00:00</span>
                    </div>
                    
                    <div class="playback-controls">
                        <!-- Boutons playlist (masqu√©s si pas de playlist) -->
                        <button class="control-btn btn-prev" id="globalPrev" title="Pr√©c√©dent" style="display: none;">
                            ‚èÆÔ∏è
                        </button>
                        
                        <!-- Boutons de lecture -->
                        <button class="control-btn btn-play" id="globalPlay" title="Lecture">
                            ‚ñ∂Ô∏è
                        </button>
                        <button class="control-btn btn-pause" id="globalPause" title="Pause" style="display: none;">
                            ‚è∏Ô∏è
                        </button>
                        <button class="control-btn btn-stop" id="globalStop" title="Stop">
                            ‚èπÔ∏è
                        </button>
                        
                        <!-- Boutons playlist -->
                        <button class="control-btn btn-next" id="globalNext" title="Suivant" style="display: none;">
                            ‚è≠Ô∏è
                        </button>
                    </div>
                    
                    <!-- Barre de progression -->
                    <div class="playback-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="globalProgress"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Bouton debug (coccinelle) -->
                <div class="header-debug">
                    <button class="btn-debug" id="btnToggleDebug" title="Afficher/Masquer les logs">
                        üêû
                    </button>
                    <div class="connection-status" id="connectionStatus">
                        <span class="status-dot"></span>
                        <span class="status-text">D√©connect√©</span>
                    </div>
                </div>
            </div>
            
            <!-- Navigation principale -->
            <nav class="main-nav">
                <a href="#home" class="nav-item active" data-page="home">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-label">Home</span>
                </a>
                <a href="#files" class="nav-item" data-page="files">
                    <span class="nav-icon">üìÅ</span>
                    <span class="nav-label">Fichiers</span>
                </a>
                <a href="#instruments" class="nav-item" data-page="instruments">
                    <span class="nav-icon">üé∏</span>
                    <span class="nav-label">Instruments</span>
                </a>
                <a href="#keyboard" class="nav-item" data-page="keyboard">
                    <span class="nav-icon">üéπ</span>
                    <span class="nav-label">Keyboard</span>
                </a>
                <a href="#system" class="nav-item" data-page="system">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-label">Syst√®me</span>
                </a>
            </nav>
        </header>

        <!-- ========================================================================
             CONSOLE DE DEBUG (cach√©e par d√©faut)
             ======================================================================== -->
        <div class="debug-console" id="debugConsole" style="display: none;">
            <div class="debug-header">
                <span class="debug-title">üêû Console de Debug</span>
                <button class="btn-close-debug" id="btnCloseDebug">√ó</button>
            </div>
            <div class="debug-content" id="debugContent">
                <!-- Logs affich√©s ici -->
            </div>
            <div class="debug-controls">
                <button class="btn-clear-logs" id="btnClearLogs">Effacer</button>
                <select class="log-level-select" id="logLevelSelect">
                    <option value="all">Tous</option>
                    <option value="error">Erreurs</option>
                    <option value="warn">Avertissements</option>
                    <option value="info" selected>Info</option>
                    <option value="debug">Debug</option>
                </select>
            </div>
        </div>

        <!-- ========================================================================
             MAIN CONTENT - Pages
             ======================================================================== -->
        <main class="app-main">
            
            <!-- ================================================================
                 PAGE HOME - S√©lection + Visualizer + Routing
                 ================================================================ -->
            <div id="home" class="page active">
                <div class="home-layout">
                    
                    <!-- S√©lection fichiers/playlists -->
                    <div class="home-selector">
                        <div class="selector-tabs">
                            <button class="selector-tab active" data-mode="files">Fichiers</button>
                            <button class="selector-tab" data-mode="playlists">Playlists</button>
                        </div>
                        
                        <div class="selector-content">
                            <!-- Liste des fichiers -->
                            <div class="files-list" id="filesList">
                                <!-- G√©n√©r√© par HomeView -->
                            </div>
                            
                            <!-- Liste des playlists -->
                            <div class="playlists-list" id="playlistsList" style="display: none;">
                                <!-- G√©n√©r√© par HomeView -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Visualizer avec barre instruments -->
                    <div class="home-visualizer">
                        <!-- Barre instruments avec routing -->
                        <div class="instruments-bar">
                            <div class="instruments-title">
                                <span class="icon">üé∏</span>
                                <span class="label">Instruments actifs</span>
                            </div>
                            <div class="instruments-list" id="activeInstruments">
                                <!-- G√©n√©r√© dynamiquement -->
                            </div>
                            <div class="instruments-actions">
                                <button class="btn-mute-all" id="btnMuteAll" title="Mute/Unmute tous les canaux">
                                    <span class="mute-icon">üîá</span>
                                    <span class="mute-label">Mute All</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Canvas visualizer -->
                        <div class="visualizer-container">
                            <canvas id="visualizerCanvas" class="visualizer-canvas"></canvas>
                            <div class="visualizer-info" id="visualizerInfo">
                                <span class="note-count">0 notes</span>
                                <span class="active-channels">0 canaux actifs</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ================================================================
                 PAGE FICHIERS - Liste + Edition + Routes + Playlists
                 ================================================================ -->
            <div id="files" class="page">
                <div class="page-header">
                    <h1>üìÅ Gestion des Fichiers</h1>
                </div>
                
                <div class="files-layout">
                    <!-- Liste des fichiers MIDI JSON -->
                    <div class="files-section">
                        <div class="section-header">
                            <h2>Fichiers MIDI JSON</h2>
                            <button class="btn-action" id="btnRefreshFiles">
                                üîÑ Actualiser
                            </button>
                        </div>
                        
                        <div class="files-grid" id="filesGrid">
                            <!-- G√©n√©r√© par FileView -->
                        </div>
                    </div>
                    
                    <!-- Gestion des playlists -->
                    <div class="playlists-section">
                        <div class="section-header">
                            <h2>Playlists</h2>
                            <button class="btn-action btn-create" id="btnCreatePlaylist">
                                ‚ûï Nouvelle Playlist
                            </button>
                        </div>
                        
                        <div class="playlists-grid" id="playlistsGrid">
                            <!-- G√©n√©r√© par PlaylistView -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ================================================================
                 PAGE INSTRUMENTS - Connexion + Param√®tres
                 ================================================================ -->
            <div id="instruments" class="page">
                <div class="page-header">
                    <h1>üé∏ Gestion des Instruments</h1>
                </div>
                
                <div class="instruments-layout">
                    <!-- Recherche et connexion -->
                    <div class="instruments-discover">
                        <div class="section-header">
                            <h2>Rechercher et connecter</h2>
                            <div class="discover-controls">
                                <button class="btn-scan" id="btnScanUSB">
                                    üîå Scan USB
                                </button>
                                <button class="btn-scan" id="btnScanBluetooth">
                                    üì° Scan Bluetooth
                                </button>
                                <button class="btn-scan" id="btnScanNetwork">
                                    üåê Scan R√©seau
                                </button>
                            </div>
                        </div>
                        
                        <div class="devices-found" id="devicesFound">
                            <!-- G√©n√©r√© par InstrumentView -->
                        </div>
                    </div>
                    
                    <!-- Instruments connect√©s -->
                    <div class="instruments-connected">
                        <div class="section-header">
                            <h2>Instruments connect√©s</h2>
                        </div>
                        
                        <div class="devices-list" id="connectedDevices">
                            <!-- G√©n√©r√© par InstrumentView -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ================================================================
                 PAGE KEYBOARD
                 ================================================================ -->
            <div id="keyboard" class="page">
                <div class="keyboard-container" id="keyboardContainer">
                    <!-- G√©n√©r√© par KeyboardView -->
                </div>
            </div>
            
            <!-- ================================================================
                 PAGE SYST√àME - R√©glages
                 ================================================================ -->
            <div id="system" class="page">
                <div class="page-header">
                    <h1>‚öôÔ∏è R√©glages Syst√®me</h1>
                </div>
                
                <div class="system-layout">
                    <!-- Param√®tres g√©n√©raux -->
                    <div class="system-section">
                        <h2>Param√®tres g√©n√©raux</h2>
                        <div class="settings-grid" id="generalSettings">
                            <!-- G√©n√©r√© par SystemView -->
                        </div>
                    </div>
                    
                    <!-- Param√®tres MIDI -->
                    <div class="system-section">
                        <h2>Configuration MIDI</h2>
                        <div class="settings-grid" id="midiSettings">
                            <!-- G√©n√©r√© par SystemView -->
                        </div>
                    </div>
                    
                    <!-- Performance -->
                    <div class="system-section">
                        <h2>Performance</h2>
                        <div class="settings-grid" id="performanceSettings">
                            <!-- G√©n√©r√© par SystemView -->
                        </div>
                    </div>
                    
                    <!-- Actions syst√®me -->
                    <div class="system-section">
                        <h2>Actions syst√®me</h2>
                        <div class="system-actions">
                            <button class="btn-action btn-danger" id="btnRestartServices">
                                üîÑ Red√©marrer services
                            </button>
                            <button class="btn-action btn-warning" id="btnClearCache">
                                üóëÔ∏è Vider le cache
                            </button>
                            <button class="btn-action" id="btnExportSettings">
                                üíæ Exporter config
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ================================================================
                 PAGE EDITOR (Modal plein √©cran)
                 ================================================================ -->
            <div id="editor" class="page page-fullscreen" style="display: none;">
                <div class="editor-container" id="editorContainer">
                    <!-- G√©n√©r√© par EditorView -->
                </div>
            </div>
            
            <!-- ================================================================
                 PAGE ROUTING (Modal)
                 ================================================================ -->
            <div id="routing" class="page page-modal" style="display: none;">
                <div class="routing-container" id="routingContainer">
                    <!-- G√©n√©r√© par RoutingView -->
                </div>
            </div>
            
        </main>

        <!-- ========================================================================
             MODALS & OVERLAYS
             ======================================================================== -->
        <div id="modal-overlay" class="modal-overlay" style="display: none;">
            <div class="modal-content" id="modalContent">
                <!-- Contenu modal dynamique -->
            </div>
        </div>

    </div>

    <!-- ========================================================================
         LOADING INDICATOR
         ======================================================================== -->
    <div id="loading-indicator" class="loading-indicator">
        <div class="spinner"></div>
        <p>Chargement de MIDI Mind...</p>
    </div>

    <!-- ========================================================================
         SCRIPTS - ORDRE CRITIQUE
         ======================================================================== -->
    
    <!-- Configuration -->
    <script src="js/config/AppConfig.js"></script>
    <script src="js/config/PerformanceConfig.js"></script>

    <!-- Utilitaires de base -->
    <script src="js/utils/Logger.js"></script>
    <script src="js/utils/DebugConsole.js"></script>
    <script src="js/utils/Constants.js"></script>
    <script src="js/utils/MidiConstants.js"></script>
    <script src="js/utils/Formatter.js"></script>
    <script src="js/utils/Validator.js"></script>
    <script src="js/utils/MidiUtils.js"></script>
    <script src="js/utils/Notifications.js"></script>
    <script src="js/utils/MidiParser.js"></script>
    <script src="js/utils/KeyboardShortcuts.js"></script>
    <script src="js/utils/ApiClient.js"></script>

    <!-- Event Bus (critique) -->
    <script src="js/core/EventBus.js"></script>

    <!-- Services -->
    <script src="js/services/StorageService.js"></script>
    <script src="js/services/FileService.js"></script>
    <script src="js/services/MidiService.js"></script>
    <script src="js/services/BackendService.js"></script>

    <!-- Classes de base -->
    <script src="js/core/BaseModel.js"></script>
    <script src="js/core/BaseView.js"></script>
    <script src="js/core/BaseController.js"></script>

    <!-- Mod√®les -->
    <script src="js/models/StateModel.js"></script>
    <script src="js/models/FileModel.js"></script>
    <script src="js/models/InstrumentModel.js"></script>
    <script src="js/models/EditorModel.js"></script>
    <script src="js/models/RoutingModel.js"></script>
    <script src="js/models/SystemModel.js"></script>
    <script src="js/models/PlaybackModel.js"></script>
    <script src="js/models/PlaylistModel.js"></script>

    <!-- Vues -->
    <script src="js/views/HomeView.js"></script>
    <script src="js/views/FileView.js"></script>
    <script src="js/views/InstrumentView.js"></script>
    <script src="js/views/KeyboardView.js"></script>
    <script src="js/views/SystemView.js"></script>
    <script src="js/views/EditorView.js"></script>
    <script src="js/views/RoutingView.js"></script>
    <script src="js/views/PlaylistView.js"></script>
    <script src="js/views/VisualizerView.js"></script>

    <!-- Contr√¥leurs -->
    <script src="js/controllers/NavigationController.js"></script>
    <script src="js/controllers/HomeController.js"></script>
    <script src="js/controllers/FileController.js"></script>
    <script src="js/controllers/InstrumentController.js"></script>
    <script src="js/controllers/KeyboardController.js"></script>
    <script src="js/controllers/SystemController.js"></script>
    <script src="js/controllers/EditorController.js"></script>
    <script src="js/controllers/RoutingController.js"></script>
    <script src="js/controllers/PlaybackController.js"></script>
    <script src="js/controllers/GlobalPlaybackController.js"></script>
    <script src="js/controllers/PlaylistController.js"></script>
    <script src="js/controllers/VisualizerController.js"></script>

    <!-- Application -->
    <script src="js/core/Application.js"></script>
    <script src="js/core/Router.js"></script>

    <!-- Initialisation -->
    <script src="js/main.js"></script>

</body>
</html>