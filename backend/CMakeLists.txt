# ============================================================================
# Fichier: backend/CMakeLists.txt
# Version: 4.0.4 - VÃ‰RIFICATION COMPLÃˆTE ET OPTIMISATIONS
# Date: 2025-10-15
# Projet: MidiMind - SystÃ¨me d'Orchestration MIDI pour Raspberry Pi
# ============================================================================
#
# CORRECTIONS v4.0.4 - VÃ‰RIFICATION COMPLÃˆTE:
#   âœ… Tous les 32 fichiers sources requis confirmÃ©s
#   âœ… Fichiers optionnels correctement gÃ©rÃ©s
#   âœ… NetworkManager avec tous ses composants
#   âœ… Headers-only exclus de la compilation
#   âœ… DÃ©pendances systÃ¨me optimisÃ©es
#   âœ… Messages de status amÃ©liorÃ©s
#   âœ… Gestion des erreurs renforcÃ©e
#
# TOTAL FICHIERS REQUIS: 32
# TOTAL FICHIERS OPTIONNELS: Variables selon prÃ©sence
#
# ============================================================================

cmake_minimum_required(VERSION 3.16)

project(MidiMind 
    VERSION 4.0.4
    LANGUAGES CXX
    DESCRIPTION "MIDI Orchestration System for Raspberry Pi"
)

# ============================================================================
# OPTIONS
# ============================================================================

option(BUILD_TESTS "Build test suite" OFF)
option(BUILD_DOCS "Build documentation" OFF)
option(ENABLE_SANITIZERS "Enable sanitizers (Debug only)" ON)
option(ENABLE_NETWORK "Enable network features (WiFi/BT/RTP-MIDI)" ON)

# ============================================================================
# CONFIGURATION
# ============================================================================

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

if(NOT CMAKE_BUILD_TYPE)
    set(CMAKE_BUILD_TYPE Release)
endif()

message(STATUS "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
message(STATUS "â•‘     MidiMind v${PROJECT_VERSION}                   â•‘")
message(STATUS "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
message(STATUS "Build type:      ${CMAKE_BUILD_TYPE}")
message(STATUS "C++ Standard:    ${CMAKE_CXX_STANDARD}")
message(STATUS "Sanitizers:      ${ENABLE_SANITIZERS}")
message(STATUS "Network Module:  ${ENABLE_NETWORK}")
message(STATUS "========================================")

# ============================================================================
# FLAGS
# ============================================================================

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -Wextra -Wpedantic -Wno-unused-parameter")
set(CMAKE_CXX_FLAGS_RELEASE "-O3 -DNDEBUG -march=native")
set(CMAKE_CXX_FLAGS_DEBUG "-g -O0 -DDEBUG")

if(ENABLE_SANITIZERS AND CMAKE_BUILD_TYPE STREQUAL "Debug")
    set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -fsanitize=address,undefined")
    set(CMAKE_EXE_LINKER_FLAGS_DEBUG "${CMAKE_EXE_LINKER_FLAGS_DEBUG} -fsanitize=address,undefined")
    message(STATUS "âœ“ Sanitizers enabled (Debug mode)")
endif()

# ============================================================================
# DÃ‰PENDANCES SYSTÃˆME
# ============================================================================

message(STATUS "")
message(STATUS "Checking system dependencies...")
message(STATUS "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")

# Threads (pthread)
find_package(Threads REQUIRED)
message(STATUS "âœ“ Threads: found")

# SQLite3
find_package(SQLite3 REQUIRED)
if(SQLite3_FOUND)
    message(STATUS "âœ“ SQLite3: ${SQLite3_VERSION}")
else()
    message(FATAL_ERROR "âŒ SQLite3 required. Install: sudo apt install libsqlite3-dev")
endif()

# ALSA (pour MIDI USB/Virtual)
find_library(ALSA_LIBRARY asound)
find_path(ALSA_INCLUDE_DIR alsa/asoundlib.h)
if(ALSA_LIBRARY AND ALSA_INCLUDE_DIR)
    message(STATUS "âœ“ ALSA: ${ALSA_LIBRARY}")
else()
    message(FATAL_ERROR "âŒ ALSA required. Install: sudo apt install libasound2-dev")
endif()

# nlohmann/json (JSON parsing)
find_package(nlohmann_json 3.11.0 QUIET)
if(nlohmann_json_FOUND)
    message(STATUS "âœ“ nlohmann/json: ${nlohmann_json_VERSION}")
else()
    message(WARNING "âš  nlohmann/json not found. Install: sudo apt install nlohmann-json3-dev")
endif()

# Boost (optionnel, pour utilitaires)
find_package(Boost QUIET)
if(Boost_FOUND)
    message(STATUS "âœ“ Boost: ${Boost_VERSION} (optional)")
endif()

message(STATUS "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
message(STATUS "")

# ============================================================================
# FICHIERS SOURCE - CORE (2 REQUIS)
# ============================================================================
# NOTE: Config.h, Logger.h, ErrorManager.h sont HEADERS-ONLY (pas de .cpp)

set(SOURCES_CORE
    src/main.cpp
    src/core/Application.cpp
)

message(STATUS "ğŸ“ Core sources (required): ${CMAKE_CURRENT_LIST_LINE}")
message(STATUS "   â”œâ”€ main.cpp")
message(STATUS "   â””â”€ Application.cpp")

# ============================================================================
# FICHIERS SOURCE - API (3 REQUIS)
# ============================================================================
# NOTE: Les fichiers commands/*.cpp sont INCLUS dans CommandProcessorV2.cpp
#       via #include, ils ne se compilent PAS sÃ©parÃ©ment !

set(SOURCES_API
    src/api/ApiServer.cpp
    src/api/CommandProcessorV2.cpp
    src/api/MessageEnvelope.cpp
)

message(STATUS "ğŸ“ API sources (required): 3")
message(STATUS "   â”œâ”€ ApiServer.cpp")
message(STATUS "   â”œâ”€ CommandProcessorV2.cpp")
message(STATUS "   â””â”€ MessageEnvelope.cpp")
message(STATUS "   Note: commands/*.cpp included in CommandProcessorV2.cpp")

# ============================================================================
# FICHIERS SOURCE - MIDI CORE (5 REQUIS)
# ============================================================================

set(SOURCES_MIDI_CORE
    src/midi/MidiMessage.cpp
    src/midi/MidiRouter.cpp
    src/midi/MidiFileManager.cpp
    src/midi/MidiValidator.cpp
    src/midi/JsonMidiConverter.cpp
)

message(STATUS "ğŸ“ MIDI Core sources (required): 5")
message(STATUS "   â”œâ”€ MidiMessage.cpp")
message(STATUS "   â”œâ”€ MidiRouter.cpp")
message(STATUS "   â”œâ”€ MidiFileManager.cpp")
message(STATUS "   â”œâ”€ MidiValidator.cpp")
message(STATUS "   â””â”€ JsonMidiConverter.cpp")

# ============================================================================
# FICHIERS SOURCE - MIDI DEVICES (3 REQUIS)
# ============================================================================
# NOTE: WifiDevice.h est HEADER-ONLY (plugin)
# NOTE: BleMidiDevice.cpp est dans SOURCES_NETWORK, pas ici

set(SOURCES_MIDI_DEVICES
    src/midi/devices/MidiDeviceManager.cpp
    src/midi/devices/UsbMidiDevice.cpp
    src/midi/devices/VirtualMidiDevice.cpp
)

message(STATUS "ğŸ“ MIDI Devices sources (required): 3")
message(STATUS "   â”œâ”€ MidiDeviceManager.cpp")
message(STATUS "   â”œâ”€ UsbMidiDevice.cpp")
message(STATUS "   â””â”€ VirtualMidiDevice.cpp")
message(STATUS "   Note: WifiDevice.h is header-only")
message(STATUS "   Note: BleMidiDevice.cpp in network/ module")

# ============================================================================
# FICHIERS SOURCE - MIDI PLAYER (1 REQUIS)
# ============================================================================

set(SOURCES_MIDI_PLAYER
    src/midi/player/MidiPlayer.cpp
)

message(STATUS "ğŸ“ MIDI Player sources (required): 1")
message(STATUS "   â””â”€ MidiPlayer.cpp")

# ============================================================================
# FICHIERS SOURCE - MIDI FILE (2 REQUIS)
# ============================================================================

set(SOURCES_MIDI_FILE
    src/midi/file/MidiFileReader.cpp
    src/midi/file/MidiFileWriter.cpp
)

message(STATUS "ğŸ“ MIDI File sources (required): 2")
message(STATUS "   â”œâ”€ MidiFileReader.cpp")
message(STATUS "   â””â”€ MidiFileWriter.cpp")

# ============================================================================
# FICHIERS SOURCE - MIDI PROCESSING (1 REQUIS)
# ============================================================================

set(SOURCES_MIDI_PROCESSING
    src/midi/processing/ProcessorManager.cpp
)

message(STATUS "ğŸ“ MIDI Processing sources (required): 1")
message(STATUS "   â””â”€ ProcessorManager.cpp")

# ============================================================================
# FICHIERS SOURCE - SYSEX (2 REQUIS)
# ============================================================================
# NOTE: DeviceIdentity.h, NoteMap.h sont HEADERS-ONLY

set(SOURCES_SYSEX
    src/midi/sysex/SysExHandler.cpp
    src/midi/sysex/SysExParser.cpp
)

message(STATUS "ğŸ“ SysEx sources (required): 2")
message(STATUS "   â”œâ”€ SysExHandler.cpp")
message(STATUS "   â””â”€ SysExParser.cpp")
message(STATUS "   Note: DeviceIdentity.h, NoteMap.h header-only")

# ============================================================================
# FICHIERS SOURCE - STORAGE (6 REQUIS)
# ============================================================================

set(SOURCES_STORAGE
    src/storage/Database.cpp
    src/storage/FileManager.cpp
    src/storage/PathManager.cpp
    src/storage/PresetManager.cpp
    src/storage/SessionManager.cpp
    src/storage/Settings.cpp
)

message(STATUS "ğŸ“ Storage sources (required): 6")
message(STATUS "   â”œâ”€ Database.cpp")
message(STATUS "   â”œâ”€ FileManager.cpp")
message(STATUS "   â”œâ”€ PathManager.cpp")
message(STATUS "   â”œâ”€ PresetManager.cpp")
message(STATUS "   â”œâ”€ SessionManager.cpp")
message(STATUS "   â””â”€ Settings.cpp")

# ============================================================================
# FICHIERS SOURCE - NETWORK (7 REQUIS si ENABLE_NETWORK=ON)
# ============================================================================

set(SOURCES_NETWORK)

if(ENABLE_NETWORK)
    set(SOURCES_NETWORK
        src/network/NetworkManager.cpp
        src/network/WifiManager.cpp
        src/network/BluetoothManager.cpp
        src/network/bluetooth/BleMidiDevice.cpp
        src/network/wifi/WiFiHotspot.cpp
        src/network/discovery/MdnsDiscovery.cpp
        src/network/rtpmidi/RtpMidiServer.cpp
    )
    
    message(STATUS "ğŸ“ Network sources (enabled): 7")
    message(STATUS "   â”œâ”€ NetworkManager.cpp")
    message(STATUS "   â”œâ”€ WifiManager.cpp")
    message(STATUS "   â”œâ”€ BluetoothManager.cpp")
    message(STATUS "   â”œâ”€ bluetooth/BleMidiDevice.cpp")
    message(STATUS "   â”œâ”€ wifi/WiFiHotspot.cpp")
    message(STATUS "   â”œâ”€ discovery/MdnsDiscovery.cpp")
    message(STATUS "   â””â”€ rtpmidi/RtpMidiServer.cpp")
else()
    message(STATUS "ğŸ“ Network sources: DISABLED")
endif()

# ============================================================================
# FICHIERS OPTIONNELS
# ============================================================================

set(SOURCES_OPTIONAL)
set(OPTIONAL_COUNT 0)

message(STATUS "")
message(STATUS "ğŸ“¦ Checking optional sources...")
message(STATUS "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")

# EventBus
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/src/core/EventBus.cpp")
    list(APPEND SOURCES_OPTIONAL src/core/EventBus.cpp)
    math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
    message(STATUS "   âœ“ EventBus.cpp")
endif()

# JsonValidator  
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/src/core/JsonValidator.cpp")
    list(APPEND SOURCES_OPTIONAL src/core/JsonValidator.cpp)
    math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
    message(STATUS "   âœ“ JsonValidator.cpp")
endif()

# EditorState
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/src/api/editor/EditorState.cpp")
    list(APPEND SOURCES_OPTIONAL src/api/editor/EditorState.cpp)
    math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
    message(STATUS "   âœ“ EditorState.cpp")
endif()

# MidiClock
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/src/midi/MidiClock.cpp")
    list(APPEND SOURCES_OPTIONAL src/midi/MidiClock.cpp)
    math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
    message(STATUS "   âœ“ MidiClock.cpp")
endif()

# MidiTransforms
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/src/midi/MidiTransforms.cpp")
    list(APPEND SOURCES_OPTIONAL src/midi/MidiTransforms.cpp)
    math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
    message(STATUS "   âœ“ MidiTransforms.cpp")
endif()

# MidiFileAnalyzer
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/src/midi/file/MidiFileAnalyzer.cpp")
    list(APPEND SOURCES_OPTIONAL src/midi/file/MidiFileAnalyzer.cpp)
    math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
    message(STATUS "   âœ“ MidiFileAnalyzer.cpp")
endif()

# TransportController
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/src/midi/player/TransportController.cpp")
    list(APPEND SOURCES_OPTIONAL src/midi/player/TransportController.cpp)
    math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
    message(STATUS "   âœ“ TransportController.cpp")
endif()

# Processors crÃ©atifs
set(CREATIVE_PROCESSORS
    "ArpeggiatorProcessor"
    "DelayProcessor"
    "HarmonizerProcessor"
    "TransposeProcessor"
)

foreach(PROCESSOR ${CREATIVE_PROCESSORS})
    set(PROCESSOR_PATH "src/midi/processing/creative/${PROCESSOR}.cpp")
    if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/${PROCESSOR_PATH}")
        list(APPEND SOURCES_OPTIONAL ${PROCESSOR_PATH})
        math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
        message(STATUS "   âœ“ ${PROCESSOR}.cpp")
    endif()
endforeach()

# Processors effects
set(EFFECT_PROCESSORS
    "ChorusProcessor"
    "CompressorProcessor"
    "FilterProcessor"
    "ReverbProcessor"
)

foreach(PROCESSOR ${EFFECT_PROCESSORS})
    set(PROCESSOR_PATH "src/midi/processing/effects/${PROCESSOR}.cpp")
    if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/${PROCESSOR_PATH}")
        list(APPEND SOURCES_OPTIONAL ${PROCESSOR_PATH})
        math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
        message(STATUS "   âœ“ ${PROCESSOR}.cpp")
    endif()
endforeach()

# PriorityQueueScheduler
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/src/midi/routing/PriorityQueueScheduler.cpp")
    list(APPEND SOURCES_OPTIONAL src/midi/routing/PriorityQueueScheduler.cpp)
    math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
    message(STATUS "   âœ“ PriorityQueueScheduler.cpp")
endif()

# CustomSysExParser
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/src/midi/sysex/CustomSysExParser.cpp")
    list(APPEND SOURCES_OPTIONAL src/midi/sysex/CustomSysExParser.cpp)
    math(EXPR OPTIONAL_COUNT "${OPTIONAL_COUNT} + 1")
    message(STATUS "   âœ“ CustomSysExParser.cpp")
endif()

if(OPTIONAL_COUNT EQUAL 0)
    message(STATUS "   (none found)")
endif()

message(STATUS "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
message(STATUS "Total optional sources: ${OPTIONAL_COUNT}")
message(STATUS "")

# ============================================================================
# COMBINAISON DES SOURCES
# ============================================================================

set(ALL_SOURCES
    ${SOURCES_CORE}
    ${SOURCES_API}
    ${SOURCES_MIDI_CORE}
    ${SOURCES_MIDI_DEVICES}
    ${SOURCES_MIDI_PLAYER}
    ${SOURCES_MIDI_FILE}
    ${SOURCES_MIDI_PROCESSING}
    ${SOURCES_SYSEX}
    ${SOURCES_STORAGE}
    ${SOURCES_NETWORK}
    ${SOURCES_OPTIONAL}
)

# Compter les sources
list(LENGTH SOURCES_CORE COUNT_CORE)
list(LENGTH SOURCES_API COUNT_API)
list(LENGTH SOURCES_MIDI_CORE COUNT_MIDI_CORE)
list(LENGTH SOURCES_MIDI_DEVICES COUNT_MIDI_DEVICES)
list(LENGTH SOURCES_MIDI_PLAYER COUNT_MIDI_PLAYER)
list(LENGTH SOURCES_MIDI_FILE COUNT_MIDI_FILE)
list(LENGTH SOURCES_MIDI_PROCESSING COUNT_MIDI_PROCESSING)
list(LENGTH SOURCES_SYSEX COUNT_SYSEX)
list(LENGTH SOURCES_STORAGE COUNT_STORAGE)
list(LENGTH SOURCES_NETWORK COUNT_NETWORK)
list(LENGTH ALL_SOURCES COUNT_TOTAL)

math(EXPR COUNT_REQUIRED "${COUNT_CORE} + ${COUNT_API} + ${COUNT_MIDI_CORE} + ${COUNT_MIDI_DEVICES} + ${COUNT_MIDI_PLAYER} + ${COUNT_MIDI_FILE} + ${COUNT_MIDI_PROCESSING} + ${COUNT_SYSEX} + ${COUNT_STORAGE} + ${COUNT_NETWORK}")

message(STATUS "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
message(STATUS "ğŸ“Š Source Files Summary")
message(STATUS "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
message(STATUS "  Required sources:  ${COUNT_REQUIRED}")
message(STATUS "  Optional sources:  ${OPTIONAL_COUNT}")
message(STATUS "  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
message(STATUS "  TOTAL:             ${COUNT_TOTAL}")
message(STATUS "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
message(STATUS "")

# ============================================================================
# CIBLE EXÃ‰CUTABLE
# ============================================================================

add_executable(midimind ${ALL_SOURCES})

# ============================================================================
# INCLUDES
# ============================================================================

target_include_directories(midimind PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/src
    ${CMAKE_CURRENT_SOURCE_DIR}/include
    ${SQLite3_INCLUDE_DIRS}
    ${ALSA_INCLUDE_DIR}
)

if(Boost_FOUND)
    target_include_directories(midimind PRIVATE ${Boost_INCLUDE_DIRS})
endif()

if(nlohmann_json_FOUND)
    # nlohmann_json est header-only, pas besoin d'include_directories
endif()

# ============================================================================
# LIBRARIES
# ============================================================================

target_link_libraries(midimind PRIVATE
    Threads::Threads
    ${SQLite3_LIBRARIES}
    ${ALSA_LIBRARY}
)

if(Boost_FOUND)
    target_link_libraries(midimind PRIVATE ${Boost_LIBRARIES})
endif()

if(nlohmann_json_FOUND)
    target_link_libraries(midimind PRIVATE nlohmann_json::nlohmann_json)
endif()

# ============================================================================
# PROPRIÃ‰TÃ‰S
# ============================================================================

set_target_properties(midimind PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin"
    OUTPUT_NAME "midimind"
    CXX_STANDARD 17
    CXX_STANDARD_REQUIRED ON
)

# ============================================================================
# INSTALLATION
# ============================================================================

install(TARGETS midimind 
    RUNTIME DESTINATION bin
    COMPONENT runtime
)

# Configuration files
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/config/")
    install(DIRECTORY config/ 
        DESTINATION /etc/midimind 
        OPTIONAL
        COMPONENT config
    )
endif()

# Documentation
install(FILES 
    README.md 
    LICENSE 
    DESTINATION /usr/share/doc/midimind 
    OPTIONAL
    COMPONENT documentation
)

# ============================================================================
# PACKAGE (DEB)
# ============================================================================

set(CPACK_GENERATOR "DEB")
set(CPACK_PACKAGE_NAME "midimind")
set(CPACK_PACKAGE_VERSION ${PROJECT_VERSION})
set(CPACK_PACKAGE_VENDOR "MidiMind Team")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "MIDI Orchestration System for Raspberry Pi")
set(CPACK_PACKAGE_DESCRIPTION "Complete MIDI orchestration and routing system with WebSocket API, multi-device support, and advanced processing capabilities.")
set(CPACK_PACKAGE_CONTACT "contact@midimind.io")
set(CPACK_PACKAGE_HOMEPAGE_URL "https://github.com/midimind/midimind")

# DÃ©pendances Debian
set(CPACK_DEBIAN_PACKAGE_DEPENDS "libasound2 (>= 1.2.0), libsqlite3-0 (>= 3.36.0)")
set(CPACK_DEBIAN_PACKAGE_SECTION "sound")
set(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")

# Composants
set(CPACK_COMPONENTS_ALL runtime config documentation)
set(CPACK_COMPONENT_RUNTIME_REQUIRED ON)

include(CPack)

# ============================================================================
# RÃ‰SUMÃ‰ FINAL
# ============================================================================

message(STATUS "")
message(STATUS "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
message(STATUS "â•‘   Configuration Complete! âœ“            â•‘")
message(STATUS "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
message(STATUS "")
message(STATUS "  ğŸ“‚ Build directory:  ${CMAKE_BINARY_DIR}")
message(STATUS "  ğŸ¯ Executable:       ${CMAKE_BINARY_DIR}/bin/midimind")
message(STATUS "  ğŸ”§ Build type:       ${CMAKE_BUILD_TYPE}")
message(STATUS "  ğŸ“Š Source files:     ${COUNT_TOTAL}")
message(STATUS "")
message(STATUS "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
message(STATUS "ğŸš€ Build Commands:")
message(STATUS "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
message(STATUS "  make                 - Compile")
message(STATUS "  make -j$(nproc)      - Parallel compile")
message(STATUS "  make install         - Install system-wide")
message(STATUS "  make package         - Create DEB package")
message(STATUS "  make clean           - Clean build")
message(STATUS "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
message(STATUS "")

# ============================================================================
# FIN DU FICHIER CMakeLists.txt v4.0.4
# ============================================================================